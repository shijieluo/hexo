---
title: 程序员的自我修养（二）
date: 2018-04-08 16:26:07
categories: 程序员的自我修养
tags: 编译、链接
---
# gcc编译链接过程
## 预编译

```
gcc -E hello.c -o hello.i
```

预编译,实际上是把.c文件转换成.i文件,主要内容如下:
1. 把宏定义和include的头文件展开
2. 删除注释
3. 添加行号和文件标示名
4. 保留所有#pragma编译器指令
## 编译
编译的过程是把预处理完的文件进行词法,语法,语义分析,优化后产生相应的汇编代码</br>

```
gcc -S hello.i -o hello.s
```
## 汇编
汇编器将汇编语言转变为可执行的机器代码

```
gcc -c hello.s -o hello.o
```
实际上gcc将根据不同的参数调用不同的后台程序去执行预编译,编译和汇编的过程,相应的程序分别为
预编译编译程序cc1,汇编器as,链接器ld.
## 链接
静态链接实际上是在程序加载运行之前将所需要的库链接到.o文件
## 编译器的编译过程
一般分为6部:扫描,语法分析,语义分析,源代码优化,代码生成,目标代码优化.

### 扫描器的词法分析
将代码分割成简单的记号,一般分为:关键字,标识符,字面量和特殊符号

### 语法分析
通过语法分析器对扫描器产生的记号进行语法分析,产生语法树.
分析过程采用上下文无关语法.

### 语义分析
语义分析分为静态语义和动态语义,动态语义只有在运行时才能确定.
静态语义包括声明和类型的匹配.
通过语义分析,整个语法树的表达式都被标识了类型

### 中间语言生成



